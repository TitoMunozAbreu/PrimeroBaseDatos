<-- BASE DE DATOS EMPRESA -- >
CREATE DATABASE IF NOT EXISTS EMPRESA;
USE EMPRESA;

CREATE TABLE IF NOT EXISTS CLIENTE(
cliente_codigo INT (6) UNSIGNED NOT NULL AUTO_INCREMENT,
nombre VARCHAR (45) NOT NULL,
direccion VARCHAR (40),
ciudad VARCHAR (30),
estado VARCHAR (2),
CP VARCHAR (9),
area SMALLINT (3),
telefono VARCHAR (9),
repr_cod SMALLINT (4) UNSIGNED,
observaciones TEXT,
CONSTRAINT PK_CLIENTE PRIMARY KEY (cliente_codigo),
CONSTRAINT FK_CLIENTE FOREIGN KEY (repr_cod) 
				REFERENCES empleado (emp_no)
				ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS PEDIDO(
pedido_numero SMALLINT (4) UNSIGNED NOT NULL AUTO_INCREMENT,
pedido_fecha DATE,
pedido_tipo CHAR (1),
cliente_codigo INT (6) UNSIGNED NOT NULL,
fecha_envio DATE,
total DECIMAL (8,2) UNSIGNED,
CONSTRAINT PK_PEDIDO PRIMARY KEY (pedido_numero),
CONSTRAINT FK_PEDIDO FOREIGN KEY (cliente_codigo)
			REFERENCES cliente (cliente_codigo)
			ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS EMPLEADO (
emp_no SMALLINT (4) UNSIGNED NOT NULL AUTO_INCREMENT,
nombre VARCHAR (10) NOT NULL,
cargo VARCHAR (10),
jefe_de SMALLINT (4) UNSIGNED,
fecha_alta DATE,
salario INT (10) UNSIGNED,
comision INT (10) UNSIGNED,
dept_no TINYINT (2) UNSIGNED NOT NULL,
CONSTRAINT PK_EMPLEADO PRIMARY KEY (emp_no),
CONSTRAINT FK_EMPLEADO_JEF FOREIGN KEY (jefe_de)
			REFERENCES empleado (emp_no),
CONSTRAINT FK_EMPLEADO_DEP FOREIGN KEY (dept_no)
			REFERENCES departamento (dept_no)
			ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS DEPARTAMENTO (
dept_no TINYINT (2) UNSIGNED NOT NULL AUTO_INCREMENT,
dnom VARCHAR (14) NOT NULL,
loc VARCHAR (14),
CONSTRAINT PK_DEPARTAMENTO PRIMARY KEY (dept_no, dnom)
);

CREATE TABLE IF NOT EXISTS DETALLE (
pedido_numero SMALLINT (4) UNSIGNED NOT NULL,
detalle_numero SMALLINT (4) UNSIGNED NOT NULL,
producto_numero INT (6) UNSIGNED NOT NULL,
precio_venta DECIMAL (8,2) UNSIGNED,
cantidad INT (8) UNSIGNED,
importe DECIMAL (8,2) UNSIGNED,
CONSTRAINT PK_DETALLE PRIMARY KEY (pedido_numero, detalle_numero),
CONSTRAINT FK_DETALLE_PED FOREIGN KEY (pedido_numero) 
			REFERENCES pedido(pedido_numero) 
			ON DELETE CASCADE,
CONSTRAINT FK_DETALLE_PRO FOREIGN KEY (producto_numero) 
			REFERENCES producto (producto_numero) 			
);

CREATE TABLE IF NOT EXISTS PRODUCTO (
producto_numero INT (6) UNSIGNED NOT NULL AUTO_INCREMENT,
descripcion VARCHAR (30) NOT NULL,
CONSTRAINT PK_PRODUCTO PRIMARY KEY (producto_numero, descripcion)
);







